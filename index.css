:root{
  --bg:#2a1b7f;
  --bg2:#3a28a6;
  --violet:#8e5cf6;
  --pink:#ff7ad9;
  --cyan:#59f1ff;
  --green:#57f287;
  --ink:#e9e7ff;
  --muted:#bdb8ff;
  --card:#2b2266cc;
  --shadow: 0 12px 30px rgba(0,0,0,.35);
  --radius:18px;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;padding:0}
body{
  color:var(--ink);
  background:
    radial-gradient(1200px 800px at 80% -10%, #5b46ff22 0%, transparent 60%),
    radial-gradient(1000px 600px at -10% 20%, #00e5ff14 0%, transparent 60%),
    linear-gradient(180deg, var(--bg) 0%, #1a0f5a 100%);
  font-family:"Nunito", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  overflow-x:hidden;
}

.frame{
  max-width:980px;
  margin:0 auto;
  padding:16px;
  min-height:100vh;
}

/* ========== TOPBAR ========== */
.topbar{
  display:grid;
  grid-template-columns:40px 1fr auto;
  align-items:center;
  gap:12px;
  padding:12px 16px;
  border:2px solid #6f5dff66;
  background:linear-gradient(180deg, #251a6b, #1f155b);
  border-radius:16px;
  box-shadow:var(--shadow);
  position:sticky; 
  top:8px; 
  z-index:100;
  backdrop-filter:saturate(1.2) blur(6px);
}
.logo{font-size:22px}
.title{
  margin:0;
  font-family:"Press Start 2P", monospace;
  font-size:14px;
  letter-spacing:1px;
  color:#fff;
  text-shadow:0 2px 0 #0008, 0 0 8px #9e7bff;
}
.nav{
  display:flex;
  align-items:center;
  gap:8px;
}
.nav button{
  background:none;
  border:2px solid transparent;
  color:var(--cyan);
  font:inherit;
  font-weight:700;
  cursor:pointer;
  padding:8px 14px;
  border-radius:10px;
  transition:all 0.3s ease;
}
.nav button:hover{
  color:#a3fff7;
  border-color:#a3fff733;
  background:#ffffff11;
}
.nav button:disabled{
  opacity:0.4;
  cursor:not-allowed;
}

/* User badge */
.user-badge{
  display:flex;
  align-items:center;
  gap:8px;
  background:linear-gradient(135deg, #ff7ad9, #8e5cf6);
  padding:6px 12px;
  border-radius:20px;
  margin-left:12px;
  font-size:14px;
  font-weight:700;
  color:#fff;
  box-shadow:0 4px 12px rgba(255, 122, 217, 0.4);
}
.user-badge .icon{font-size:18px}
.logout-btn{
  background:rgba(0,0,0,0.3);
  border:none;
  color:#fff;
  padding:4px 10px;
  border-radius:12px;
  cursor:pointer;
  font-size:12px;
  transition:all 0.2s;
}
.logout-btn:hover{
  background:rgba(0,0,0,0.5);
}

/* ========== SECTIONS ========== */
.section{
  position:relative;
  padding:42px 10px;
  margin-top:16px;
  border-radius:var(--radius);
  overflow:hidden;
  border:2px solid #7c6cff33;
  display:none;
  min-height:calc(100vh - 140px);
}
.section.active{display:flex !important}

.section-home{background:linear-gradient(180deg, #2d1f80, #24156b)}
.section-auth{background:linear-gradient(180deg, #2d1f80, #24156b)}
.section-quiz{background:linear-gradient(180deg, #291c78, #221363)}
.section-invasion{background:linear-gradient(180deg, #2a185a, #1d0f4a)}
.section-congrats{background:linear-gradient(180deg, #1c2a6e, #10215f)}

.stars{
  position:absolute; inset:0;
  background-image:
    radial-gradient(2px 2px at 20% 30%, #fff, transparent),
    radial-gradient(2px 2px at 40% 70%, #fff, transparent),
    radial-gradient(2px 2px at 60% 20%, #fff, transparent),
    radial-gradient(2px 2px at 80% 50%, #fff, transparent),
    radial-gradient(1.5px 1.5px at 15% 80%, #fff, transparent),
    radial-gradient(1.5px 1.5px at 75% 15%, #fff, transparent);
  opacity:.6;
  animation: twinkle 6s linear infinite;
  pointer-events:none;
}
@keyframes twinkle{0%,100%{opacity:.5}50%{opacity:.9}}

/* ========== HOME SECTION ========== */
.home-wrap{
  width:100%;
  max-width:600px;
  margin:0 auto;
  text-align:center;
}
.hero{
  position:relative;
  border-radius:var(--radius);
  border:2px solid #b59bff44;
  background:linear-gradient(180deg, #3a27a6, #2a1d7f);
  padding:48px 28px;
  box-shadow:var(--shadow);
  margin-bottom:24px;
}
.pixel-heading{
  margin:0 0 10px 0;
  font-family:"Press Start 2P", monospace;
  font-size:26px;
  letter-spacing:1px;
  text-shadow:0 3px 0 #0008, 0 0 14px #a88cff;
}
.subtitle{color:var(--muted); margin:0 0 24px 0; font-size:18px}
.ship{
  width:120px; height:120px; margin:0 auto 24px;
  background:
    conic-gradient(from 200deg at 60% 50%, #9cf 0 25%, transparent 0 360deg),
    radial-gradient(40% 60% at 50% 40%, #b9f 0 60%, transparent 61%),
    linear-gradient(180deg, #7bf, #47a);
  clip-path:polygon(50% 0, 62% 20%, 72% 30%, 62% 32%, 65% 70%, 50% 100%, 35% 70%, 38% 32%, 28% 30%, 38% 20%);
  filter:drop-shadow(0 6px 12px #3df3);
  animation: floaty 3s ease-in-out infinite;
}
@keyframes floaty{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}

.welcome-text{
  background:linear-gradient(180deg, #241665d9, #1b1152d9);
  border:2px solid #b59bff33;
  box-shadow:var(--shadow);
  border-radius:var(--radius);
  padding:28px;
  margin-bottom:24px;
}
.welcome-text h3{
  font-family:"Press Start 2P", monospace;
  font-size:18px;
  margin:0 0 12px 0;
  color:#00ff88;
}
.welcome-text p{
  line-height:1.6;
  margin:8px 0;
  color:var(--muted);
}

/* ========== AUTH SECTION ========== */
.auth-container{
  width:100%;
  display:flex;
  justify-content:center;
  align-items:center;
}
.auth-tabs{
  width:100%;
  max-width:500px;
}
.tab-buttons{
  display:flex;
  gap:12px;
  margin-bottom:24px;
}
.tab-btn{
  flex:1;
  padding:14px;
  background:rgba(255,255,255,0.05);
  border:2px solid #7a6dff44;
  border-radius:12px;
  color:var(--muted);
  font-weight:700;
  cursor:pointer;
  transition:all 0.3s;
}
.tab-btn.active{
  background:linear-gradient(180deg, #3a27a6, #2a1d7f);
  border-color:#b59bff;
  color:#fff;
  box-shadow:0 4px 12px rgba(181, 155, 255, 0.3);
}

.card{
  background:linear-gradient(180deg, #241665d9, #1b1152d9);
  border:2px solid #b59bff33;
  box-shadow:var(--shadow);
  border-radius:var(--radius);
  padding:28px;
}
.card-title{
  margin:0 0 24px 0;
  font-family:"Press Start 2P", monospace;
  font-size:18px;
  text-align:center;
}

.auth-form{display:none}
.auth-form.active{display:block}

.field{margin-bottom:20px}
.field label{
  display:block;
  font-weight:700;
  margin-bottom:8px;
  color:var(--ink);
}
.field input{
  width:100%;
  padding:12px 14px;
  border-radius:12px;
  border:2px solid #7a6dff44;
  background:#120b3d;
  color:#fff;
  outline:none;
  font-size:16px;
  transition:border-color .2s, box-shadow .2s;
}
.field input:focus{
  border-color:#a896ff;
  box-shadow:0 0 0 4px #8f7bff33;
}
.hint{
  display:block; 
  margin-top:6px; 
  color:#c9c5ff99; 
  font-size:.9rem
}

.password-wrap{position:relative}
.password-wrap .eye{
  position:absolute; right:6px; top:6px;
  height:36px; width:42px; border-radius:10px;
  border:2px solid #7a6dff44; 
  background:#1a1252; 
  color:#fff;
  cursor:pointer;
  font-size:18px;
}
.meter{
  width:100%; height:8px; margin-top:8px; border-radius:6px;
}
meter::-webkit-meter-bar{background:#22145a; border-radius:6px}
meter::-webkit-meter-optimum-value{background:linear-gradient(90deg,#f36,#ffca3a,#57f287); border-radius:6px}
meter::-moz-meter-bar{background:linear-gradient(90deg,#f36,#ffca3a,#57f287); border-radius:6px}

.checkbox{
  display:flex; 
  align-items:center; 
  gap:8px; 
  color:#e6e3ffbb;
  margin:16px 0;
}
.checkbox input{width:18px; height:18px; cursor:pointer}

.btn{
  padding:14px 24px;
  border-radius:14px;
  border:2px solid transparent;
  font-weight:800;
  font-size:16px;
  color:#1a0b4b;
  background:#fff;
  cursor:pointer;
  transition:transform .06s ease, box-shadow .2s ease, filter .2s;
  width:100%;
}
.btn:hover{transform:translateY(-2px); filter:brightness(1.05)}
.btn:active{transform:translateY(0)}
.btn:disabled{
  opacity:0.5;
  cursor:not-allowed;
}
.btn-primary{
  background:linear-gradient(180deg, #7cf, #58a8ff);
  border-color:#a7d3ff77;
  box-shadow:0 10px 18px #59aaff44, inset 0 -4px 0 #2a5fbf66;
}
.btn-accent{
  background:linear-gradient(180deg, var(--pink), #ff52c4);
  border-color:#ffc0ea66;
  box-shadow:0 10px 18px #ff7ad944, inset 0 -4px 0 #c92a9866;
  color:#3b0030;
}

.error-message{
  background:rgba(255, 50, 50, 0.2);
  border:2px solid #ff5555;
  border-radius:10px;
  padding:12px;
  margin-bottom:16px;
  color:#ffaaaa;
  text-align:center;
  display:none;
}
.error-message.show{display:block}

/* ========== QUIZ SECTION ========== */
.quiz-wrap{
  position:relative;
  width:100%;
  max-width:900px;
  margin:0 auto;
}
.quiz-header{
  display:flex; 
  align-items:center; 
  justify-content:space-between; 
  margin-bottom:24px;
  padding:16px;
  background:rgba(0,0,0,0.2);
  border-radius:12px;
}
.mini-ship{
  width:50px; height:50px;
  background:conic-gradient(from 200deg at 60% 50%, #9cf 0 25%, transparent 0 360deg),
             radial-gradient(40% 60% at 50% 40%, #b9f 0 60%, transparent 61%),
             linear-gradient(180deg, #7bf, #47a);
  clip-path:polygon(50% 0, 62% 20%, 72% 30%, 62% 32%, 65% 70%, 50% 100%, 35% 70%, 38% 32%, 28% 30%, 38% 20%);
  filter:drop-shadow(0 3px 6px #3df3);
}
.lives{
  font-family:"Press Start 2P", monospace; 
  color:#ff92b7;
  font-size:20px;
}

.quiz-body{
  display:grid; 
  grid-template-columns:200px 1fr; 
  gap:20px;
}
@media (max-width:768px){
  .quiz-body{grid-template-columns:1fr}
  .sidebar{display:none}
}

.sidebar .bar{
  background:#140a46; 
  border:2px solid #7a6dff55; 
  color:#cfc9ff;
  padding:14px; 
  border-radius:12px; 
  margin-bottom:12px; 
  text-align:center; 
  font-weight:700;
  font-size:14px;
}

.question-area{
  background:linear-gradient(180deg, #241665d9, #1b1152d9);
  border:2px solid #b59bff33;
  box-shadow:var(--shadow);
  border-radius:var(--radius);
  padding:28px;
}
.question-area .q-count{
  font-family:"Press Start 2P", monospace; 
  font-size:13px; 
  color:#a7a0ff; 
  margin:0 0 16px 0;
}
.terminal{
  background:#0f0938; 
  border:2px solid #6b5cff66; 
  border-radius:12px; 
  padding:20px; 
  color:#e7e5ff;
  font-family:ui-monospace, monospace;
  margin-bottom:24px;
  min-height:80px;
  display:flex;
  align-items:center;
  font-size:18px;
  line-height:1.5;
}
.answers{
  display:grid;
  gap:12px;
}
.option{
  width:100%;
  padding:16px;
  background:linear-gradient(180deg, #c9b8ff, #a697ff);
  color:#1a0b4b;
  text-align:left;
  font-size:16px;
}
.option:hover{
  background:linear-gradient(180deg, #dac9ff, #b8a7ff);
}

/* ========== RESULTS SECTIONS ========== */
.center{
  text-align:center;
  width:100%;
  max-width:700px;
  margin:0 auto;
}
.score-display{
  font-size:2.5rem;
  font-weight:bold;
  margin:2rem 0;
  color:#00ff88;
  text-shadow:0 0 20px rgba(0, 255, 136, 0.6);
  font-family:"Press Start 2P", monospace;
}

.leaderboard{
  margin:2.5rem 0;
  width:100%;
}
.leaderboard-list{
  background:rgba(0, 0, 0, 0.3);
  border-radius:12px;
  padding:1.5rem;
  margin-top:1.5rem;
  backdrop-filter:blur(10px);
  border:2px solid rgba(0, 255, 136, 0.2);
}
.leaderboard-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:1rem 1.5rem;
  margin:0.75rem 0;
  background:rgba(255, 255, 255, 0.05);
  border-radius:10px;
  border-left:4px solid #00ff88;
  transition:all 0.3s ease;
}
.leaderboard-item:hover{
  background:rgba(255, 255, 255, 0.1);
  transform:translateX(8px);
}
.leaderboard-item.current-user{
  background:rgba(0, 255, 136, 0.15);
  border-left-color:#ffcc00;
  box-shadow:0 0 20px rgba(255, 204, 0, 0.3);
}
.leaderboard-item .rank{
  font-weight:bold;
  color:#ffcc00;
  min-width:50px;
  font-size:1.3rem;
  font-family:"Press Start 2P", monospace;
}
.leaderboard-item .name{
  flex:1;
  padding:0 1.5rem;
  font-size:1.1rem;
  font-weight:700;
}
.leaderboard-item .points{
  font-weight:bold;
  color:#00ff88;
  font-size:1.2rem;
  min-width:70px;
  text-align:right;
}

.button-group{
  display:flex;
  gap:1rem;
  margin-top:2rem;
  flex-wrap:wrap;
  justify-content:center;
}
.button-group .btn{
  min-width:180px;
}

.footer{
  text-align:center; 
  color:#c8c2ffaa; 
  padding:32px 8px;
  margin-top:32px;
}

/* ========== RESPONSIVE ========== */
@media (max-width:768px){
  .title{font-size:11px}
  .nav{flex-wrap:wrap}
  .nav button{padding:6px 10px; font-size:14px}
  .user-badge{font-size:12px; padding:4px 8px}
  .pixel-heading{font-size:20px}
  .score-display{font-size:1.8rem}
  .leaderboard-item{padding:0.75rem 1rem}
  .leaderboard-item .name{padding:0 1rem; font-size:1rem}
  .button-group{flex-direction:column}
  .button-group .btn{width:100%}
}